<div class="main-container">
  <div class="detalle-producto-card">
    <div class="product-content">
      <!-- Columna de imagen -->
      <div class="product-image-container">
        <img [src]="producto?.imagenUrl" alt="{{ producto?.nombre }}" class="product-image" />
        <div class="image-badges">
          <!-- Uso correcto de @if -->
          @if (productoDescuento) {
            <span class="discount-badge">-{{ productoDescuento }}%</span>
          }
          <span class="status-badge {{ estadoProductoClass }}">
            {{ estadoProducto }}
          </span>
        </div>
      </div>

      <!-- Columna de informaci√≥n -->
      <div class="product-details">
        <div class="product-header">
          <h2 class="product-title">{{ producto?.nombre }}</h2>
          <span class="product-category">{{ producto?.CategoriaProducto }}</span>

          <!-- Calificaci√≥n -->
          <div class="product-rating">
            <!-- Uso correcto de @for con "track" -->
            @for (star of estrellas; track star) {
              <span [class.filled]="star <= productoCalificacion" class="star">‚òÖ</span>
            }
            <span class="rating-value">({{ productoCalificacion }})</span>
            @if (productoResenias) {
              <span class="review-count">({{ productoResenias }} rese√±as)</span>
            }
          </div>
        </div>

        <!-- Precio y disponibilidad -->
        <div class="product-pricing">
          <div class="price-container">
            <p class="product-price">${{ productoPrecio }}</p>
            @if (productoPrecioOriginal) {
              <p class="original-price">${{ productoPrecioOriginal }}</p>
            }
          </div>
          <p class="product-quantity {{ cantidadClass }}">
            <span class="quantity-icon {{ cantidadIconClass }}">‚óè</span>
            {{ cantidadTexto }}
          </p>
        </div>

        <!-- Descripci√≥n -->
        <div class="product-description-container">
          <h3 class="section-title">Descripci√≥n</h3>
          <p class="product-description">{{ producto?.descripcion }}</p>
        </div>

        <!-- Acciones -->
        <div class="product-actions">
          <div class="quantity-selector">
            <button class="quantity-btn" (click)="decrementarCantidad()" [disabled]="cantidadSeleccionada <= 1">-</button>
            <span class="quantity-display">{{ cantidadSeleccionada }}</span>
            <button class="quantity-btn" (click)="incrementarCantidad()" [disabled]="cantidadSeleccionada >= productoCantidad">+</button>
          </div>

          <div class="action-buttons">
            <button class="btn-custom" (click)="agregarAlCarrito()" [disabled]="productoCantidad === 0">
              <i class="cart-icon">üõí</i> Agregar al carrito
            </button>
            <button class="btn-wishlist" (click)="agregarAFavoritos()">
              <i class="heart-icon">‚ù§</i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>