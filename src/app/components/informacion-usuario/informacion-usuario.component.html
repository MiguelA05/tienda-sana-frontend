<div class="container-fluid">
  <div class="card custom-card">
    <div class="card-header p-0 position-relative">
      <img
        src="https://storage.needpix.com/rsynced_images/banner-web-business-users-blue.jpg"
        alt="Banner"
        class="img-fluid card-banner" />
      <i class="fa-solid fa-user icon-overlay"></i>
    </div>
    <div class="card-body p-4">
      <h5 class="mb-0 text-center">
        {{ isEditing ? 'Edición de Información de Perfil' :
        'Información de Perfil' }}
      </h5>
      <form class="userinfo-form" [formGroup]="userInforForm">
        <div class="col-12 d-flex justify-content-center">
          <div class="form-group" style="max-width: 400px; width: 100%;">
            <label for="email">Email: </label>
            <input type="email" id="email" class="form-control"
              formControlName="email" />
          </div>
        </div>

        <div class="col-12 d-flex justify-content-center">
          <div class="form-group" style="max-width: 400px; width: 100%;">
            <label for="dni">DNI: </label>
            <input type="text" id="dni" class="form-control"
              formControlName="dni" />
          </div>
        </div>

        <div class="col-12 d-flex justify-content-center">
          <div class="form-group" style="max-width: 400px; width: 100%;">
            <label for="name">Nombre: </label>
            <input type="text" id="name" class="form-control"
              formControlName="name" />
            @if (shouldShowError('name')) {
            <div class="error-message">{{ getNameErrorMessage() }}</div>
            }
          </div>
        </div>

        <div class="col-12 d-flex justify-content-center">
          <div class="form-group" style="max-width: 400px; width: 100%;">
            <label for="phone">Teléfono: </label>
            <input
              type="number"
              id="phone"
              class="form-control"
              formControlName="phoneNumber" />
            @if (shouldShowError('phoneNumber')) {
            <div class="error-message">{{ getPhoneNumberErrorMessage() }}</div>
            }
          </div>
        </div>

        <div class="col-12 d-flex justify-content-center">
          <div class="form-group" style="max-width: 400px; width: 100%;">
            <label for="address">Dirección: </label>
            <input type="text" id="address" class="form-control"
              formControlName="address" />
            @if (shouldShowError('address')) {
            <div class="error-message">{{ getAddressErrorMessage() }}</div>
            }
          </div>
        </div>

        @if (isEditing) {
        <div class="col-12 d-flex justify-content-center">
          <div class="form-group" style="max-width: 400px; width: 100%;">
            <label for="password">Contraseña: </label>
            <div class="password-input-container">
              <input [type]="isPasswordVisible ? 'text' : 'password'"
                id="password" class="form-control" formControlName="password"
                placeholder="Deje vacío si no desea cambiar la contraseña" />
              <button
                type="button"
                class="btn-visibility"
                (click)="togglePasswordVisibility()"
                aria-label="Mostrar u ocultar contraseña">
                <i
                  [class]="isPasswordVisible ? 'fa-solid fa-eye-slash' : 'fa-solid fa-eye'"></i>
              </button>
            </div>
            @if (shouldShowError('password')) {
            <div class="error-message">{{ getPasswordErrorMessage() }}</div>
            }
          </div>
        </div>
        }
        <div class="col-12 d-flex justify-content-center">
          @if (isEditing) {
          <div class="d-flex justify-content-center gap-2">
            <button
              type="button"
              class="btn btn-save"
              (click)="saveChanges()">
              Guardar Cambios
            </button>
            <button type="button" class="btn btn-back ms-2"
              (click)="disableEditing()">
              Volver
            </button>
          </div>
          } @else {
          <div class="d-flex justify-content-center gap-2">
            <button type="button" class="btn btn-update"
              (click)="enableEditing()">
              Actualizar Cuenta
            </button>
            <button type="button" class="btn btn-delete ms-2"
              (click)="deleteAccount()">
              Eliminar Cuenta
            </button>
          </div>
          }
        </div>
      </form>
    </div>
  </div>
</div>